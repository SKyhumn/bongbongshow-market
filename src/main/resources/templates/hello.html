<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë´‰ë´‰ë§ˆì¼“ - í™˜ì˜í•©ë‹ˆë‹¤</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; width: 400px; }
        h1 { color: #333; margin-bottom: 10px; }
        p { color: #666; font-size: 1.1em; margin-bottom: 30px; }

        .result-box {
            background-color: #e8f5e9;
            color: #2e7d32;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            margin-bottom: 20px;
            border: 1px solid #c8e6c9;
        }

        .btn-logout {
            background-color: #ff4757;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: 0.2s;
            width: 100%;
        }
        .btn-logout:hover { background-color: #ff6b81; }
    </style>
</head>
<body>

<div class="card">
    <h1>ğŸ‰ í™˜ì˜í•©ë‹ˆë‹¤!</h1>
    <p>ë¡œê·¸ì¸ì— ì„±ê³µí•˜ì…¨ìŠµë‹ˆë‹¤.</p>

    <div id="server-message" class="result-box">
        ë°ì´í„° ë¡œë”© ì¤‘...
    </div>

    <button class="btn-logout" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
</div>

<script>
    // í˜ì´ì§€ê°€ ì—´ë¦¬ìë§ˆì ì‹¤í–‰ë¨
    window.onload = async function() {
        try {
            // 1. ì¿ í‚¤ë¥¼ ë“¤ê³  /api/user/hello ì— ë…¸í¬í•´ë´„
            const response = await fetch('/api/user/hello', {
                method: 'GET'
                // í—¤ë”ì— í† í° ë„£ì„ í•„ìš” ì—†ìŒ! (ë¸Œë¼ìš°ì €ê°€ ì•Œì•„ì„œ ì¿ í‚¤ ì±™ê²¨ê°)
            });

            // 2. ì„œë²„ê°€ "OK(200)" í•˜ë©´ ë©”ì‹œì§€ ë³´ì—¬ì¤Œ
            if (response.ok) {
                const text = await response.text();
                document.getElementById('server-message').innerText =
                    "ì„œë²„ ì‘ë‹µ: " + text;
            } else {
                // 3. ì‹¤íŒ¨í•˜ë©´(403 ë“±) ì«“ì•„ëƒ„
                alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤!");
                window.location.href = '/index.html'; // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ íŠ•ê¸°ê¸°
            }
        } catch (e) {
            console.error(e);
            document.getElementById('server-message').innerText = "ì„œë²„ ì—°ê²° ì‹¤íŒ¨";
        }
    };

    // ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
    async function logout() {
        try {
            // ì•„ê¹Œ ë§Œë“  ë¡œê·¸ì•„ì›ƒ ì»¨íŠ¸ë¡¤ëŸ¬ í˜¸ì¶œ (ì¿ í‚¤ ì‚­ì œìš©)
            await fetch('/api/public/logout', { method: 'POST' });

            alert("ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ‘‹");
            window.location.href = '/api/public/signin'; // ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™
        } catch (e) {
            alert("ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ");
        }
    }
</script>

</body>
</html>